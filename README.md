<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ðŸ’– Proposal â€” Final Version</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --bg1: #fff1f6;
    --bg2: #f0feff;
    --accent:#ff3b7d;
    --muted:#6b6b6b;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    min-height:100vh;
    font-family:"Poppins",sans-serif;
    background: linear-gradient(135deg,var(--bg1) 0%, var(--bg2) 100%);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:20px;
    color:#222;
    overflow:hidden;
  }

  .stage{
    width:100%;
    max-width:820px;
    background: rgba(255,255,255,0.6);
    border-radius:20px;
    padding:26px;
    box-shadow: 0 18px 40px rgba(12,18,35,0.12);
    position:relative;
    overflow:visible;
    text-align:center;
  }

  /* hearts container sits behind content */
  .hearts{
    pointer-events:none;
    position:absolute;
    left:0;top:0;right:0;bottom:0;
    z-index:1;
    overflow:visible;
  }

  /* Kitty */
  #kittyWrap{position:relative;z-index:2}
  #kitty{
    width:180px;height:180px;display:block;margin:12px auto;
    filter: drop-shadow(0 10px 30px rgba(0,0,0,0.18));
    animation: kittyFloat 3.4s ease-in-out infinite;
  }
  @keyframes kittyFloat{
    0%,100%{ transform:translateY(0) }
    50%{ transform:translateY(-12px) }
  }

  h1{
    font-family:'Great Vibes', cursive;
    font-size:34px;
    margin:6px 0 4px 0;
    color:var(--accent);
    z-index:2;
    position:relative;
  }
  p.lead{color:var(--muted); margin:0 0 14px 0; z-index:2; position:relative}

  .controls{z-index:2; position:relative; margin-top:12px}
  .btn{
    display:inline-block;border:0;padding:12px 22px;border-radius:999px;font-weight:600;
    cursor:pointer;margin:6px;box-shadow:0 6px 18px rgba(12,18,35,0.08);
  }
  .btn.primary{background:linear-gradient(90deg,var(--accent),#ff7aa3); color:#fff}
  .btn.ghost{background:transparent;border:1px solid rgba(0,0,0,0.06); color:#222}

  /* Letter area */
  #letterWrap{
    display:none;
    margin-top:22px;
    z-index:2;
    position:relative;
  }
  #letter{
    background:rgba(255,255,255,0.92);
    border-radius:12px;
    padding:20px;
    max-height:58vh;
    overflow:auto;
    text-align:left;
    font-family:'Great Vibes', cursive;
    font-size:18px;
    color:#2b2b2b;
    line-height:1.6;
    box-shadow:0 12px 30px rgba(12,18,35,0.06);
  }

  /* fade-in helper */
  .fade-in{ animation: fadeIn 1.6s ease forwards; opacity:0 }
  @keyframes fadeIn{ to { opacity:1 } }

  /* floating heart style (individual hearts generated by JS) */
  .heart {
    position:absolute;
    width:18px;
    height:18px;
    transform:translate(-50%,-50%) rotate(-20deg);
    pointer-events:none;
    opacity:0.95;
    will-change: transform, opacity;
    filter: drop-shadow(0 6px 18px rgba(0,0,0,0.12));
  }

  /* small responsive tweaks */
  @media (max-width:440px){
    #kitty{width:140px;height:140px}
    h1{font-size:28px}
    #letter{font-size:16px}
  }

  /* subtle backdrop blur when letter appears */
  .dim::before{
    content:'';
    position:absolute;left:0;right:0;top:0;bottom:0;
    background:rgba(255,255,255,0.3);
    backdrop-filter: blur(6px);
    z-index:1;
    border-radius:20px;
  }
</style>
</head>
<body>
  <div class="stage" id="stage">
    <div class="hearts" id="hearts"></div>

    <div id="kittyWrap">
      <!-- Hello Kitty animated GIF (shy / blushing) -->
      <img id="kitty" src="https://media.tenor.com/ck9A1VLu4n4AAAAi/hello-kitty-love.gif" alt="Hello Kitty">
      <h1>ðŸ’– My Love Letter to You ðŸ’–</h1>
      <p class="lead">A small surprise for Anushka â€” made with all my heart</p>
    </div>

    <div class="controls">
      <button class="btn primary" id="startBtn">Play Song & Start</button>
      <button class="btn ghost" id="nextBtn" style="display:none">Next ðŸ’Œ</button>
      <button class="btn ghost" id="replayBtn" style="display:none">Replay</button>
    </div>

    <div id="letterWrap">
      <div id="letter" aria-live="polite"></div>
    </div>
  </div>

<!-- audio (Dropbox direct link dl=1) -->
<audio id="bgAudio" preload="auto">
  <source src="https://www.dropbox.com/scl/fi/uzrtw8vbtbfwxdbfz4a61/I-Wanna-Be-Yours-22.mp3?rlkey=lc0ueze8sl4pgchb1rp9cafi4&st=s3kedg19&dl=1" type="audio/mpeg">
  Your browser does not support audio.
</audio>

<script>
/* ====== Configuration ====== */
const FADE_DURATION = 7000; // fade-in duration (ms)
const HEART_FREQ = 700; // spawn a heart every X ms
const HEART_COLORS = ['#ff9ccf','#ff6ea8','#ff3b7d','#ffd1e6','#ffb3c6']; // pink + red mix

/* ====== Elements ====== */
const startBtn = document.getElementById('startBtn');
const nextBtn  = document.getElementById('nextBtn');
const replayBtn = document.getElementById('replayBtn');
const letterWrap = document.getElementById('letterWrap');
const letterEl = document.getElementById('letter');
const bgAudio = document.getElementById('bgAudio');
const heartsContainer = document.getElementById('hearts');
const stage = document.getElementById('stage');

/* Full love letter text */
const loveLetter = `ðŸ’– My Love Letter to You ðŸ’–

Dear Anushka,

Kabhi socha nahi tha ki main tujhe dobara propose karungaâ€¦
Lekin dil ke kuch jazbaat aise hote hain jo baar-baar kehne ka mann karta hai. Shayad har din ke sath tera liye mera pyaar aur gehra hota ja raha haiâ€¦ aur shayad issi liye main fir se tujhe â€œI Love Youâ€ kehne se khud ko rok nahi pa raha. ðŸ’ž

Sabse pehle â€” Sorry.
Sorry agar kabhi meri kisi baat ne tujhe hurt kiya ho, agar main kabhi tujhe samajh nahi paaya, ya kabhi tere emotions ko ignore kar diya ho.
Mujhe pata hai main perfect nahi hoon, lekin har din main yahi seekh raha hoon ki tujhe khush kaise rakhun.
Dil se keh raha hoon Anushka â€” mera dil sirf tujhse hi juda hai. â¤ï¸

Tere bina sab kuch adhoora lagta hai.
Tere bina hasi bhi aadhi lagti hai, aur har din be-rang sa lagta hai.
Tu meri zindagi ka woh hissa hai jise main chhod nahi sakta â€” chahe jitni bhi doori ho, chahe kitni bhi baatein galat samajh li gayi ho.

Aaj main fir se ek chhoti si baat, bada dil lekar kehna chahta hoonâ€¦

ðŸ’ Will you be mine again, Anushka? ðŸ’

Main chahta hoon ki hum apne purane lamhon se seekh kar ek nayi shuruaat karein â€”
jahan sirf trust, pyaar aur ek dusre ka saath ho.
Mujhe fir se woh mauka de ki main tujhe har din woh feel kara sakun jo ek perfect love story mein hota hai.

Tere bina main apni duniya imagine bhi nahi kar sakta.
Tu meri har dua ka sabse khoobsurat hissa hai.
Aur main wada karta hoon, ab se har pal tera khayal rakhunga â€”
tere aansuon se pehle muskura dunga,
aur tere gusse se pehle tujhe gale laga lunga. ðŸ¤

Bas ek baar keh deâ€¦
â€œHaan, main fir se teri hoon.â€
Aur fir main duniya ka sabse khush-naseeb insaan ban jaunga.

I love you, Anushka â€” not just today, but every day, in every way, for the rest of my life. ðŸ’Œ

Always yours,
Bhrat Sharma ðŸ’–`;

/* ====== Typing effect ====== */
function typeText(target, text, charDelay=28, cb){
  target.innerHTML = '';
  let i = 0;
  function step(){
    if(i >= text.length){ cb && cb(); return; }
    target.innerHTML += text.charAt(i) === '\n' ? '<br>' : text.charAt(i);
    i++;
    setTimeout(step, charDelay);
  }
  step();
}

/* ====== Hearts animation ====== */
let heartInterval = null;
function spawnHeart(){
  const h = document.createElement('div');
  h.className = 'heart';
  const size = Math.random()*18 + 12;
  h.style.width = size + 'px';
  h.style.height = size + 'px';
  const color = HEART_COLORS[Math.floor(Math.random()*HEART_COLORS.length)];
  const svg = `<svg viewBox="0 0 512 512" width="${size}" height="${size}"><path fill="${color}" d="M471.701 73.604c-54.65-46.259-136.96-38.39-188.904 13.904L256 114.277l-26.797-26.769C178.955 35.214 96.646 27.345 41.995 73.604  -9.018 118.004-10.688 196.2 27.55 242.9l194.63 209.369c6.965 7.486 18.091 7.486 25.056 0L484.45 242.9c38.238-46.7 36.568-124.896-12.749-169.296z"/></svg>`;
  h.innerHTML = svg;
  const left = Math.random() * 100;
  h.style.left = left + '%';
  h.style.bottom = '-10%';
  heartsContainer.appendChild(h);

  const duration = Math.random()*6000 + 9000;
  const drift = (Math.random()*80 - 40);
  const start = performance.now();
  function animate(now){
    const t = (now - start) / duration;
    if(t >= 1){ h.remove(); return; }
    const y = t * 140;
    const x = drift * Math.sin(t * Math.PI * 2);
    const scale = 0.7 + 0.6*Math.sin(t*Math.PI);
    h.style.transform = `translate(${x}px, ${-y}%) scale(${scale}) rotate(${t*40}deg)`;
    h.style.opacity = 1 - t*0.92;
    requestAnimationFrame(animate);
  }
  requestAnimationFrame(animate);
}

function startHearts(){ if(!heartInterval) heartInterval=setInterval(spawnHeart, HEART_FREQ); }
function stopHearts(){ if(heartInterval){ clearInterval(heartInterval); heartInterval=null; } }

/* ====== Audio fade-in ====== */
function fadeInAudio(audioEl, duration=6000){
  try{
    audioEl.volume = 0;
    const promise = audioEl.play();
    if(promise !== undefined){ promise.catch(()=>{}); }
  }catch(e){}
  const steps = 40;
  const stepTime = duration / steps;
  let currentStep = 0;
  const iv = setInterval(()=>{
    currentStep++;
    audioEl.volume = Math.min(1, audioEl.volume + (1/steps));
    if(currentStep >= steps){ clearInterval(iv); }
  }, stepTime);
}

/* ====== Button logic ====== */
startBtn.addEventListener('click', () => {
  startBtn.disabled = true;
  startBtn.textContent = 'Song playing...';
  nextBtn.style.display = 'inline-block';
  replayBtn.style.display = 'inline-block';
  startHearts();
  fadeInAudio(bgAudio, FADE_DURATION); // now plays immediately
});

nextBtn.addEventListener('click', () => {
  nextBtn.style.display = 'none';
  stage.classList.add('dim');
  letterWrap.style.display = 'block';
  letterWrap.classList.add('fade-in');
  typeText(letterEl, loveLetter, 22);
});

replayBtn.addEventListener('click', () => {
  try{ bgAudio.pause(); bgAudio.currentTime = 0; bgAudio.volume = 1; }catch(e){}
  letterEl.innerHTML = '';
  letterWrap.style.display = 'none';
  stage.classList.remove('dim');
  startBtn.disabled = false;
  startBtn.textContent = 'Play Song & Start';
  nextBtn.style.display = 'none';
  replayBtn.style.display = 'none';
  stopHearts();
  setTimeout(startHearts, 300);
});

</script>
</body>
</html>
